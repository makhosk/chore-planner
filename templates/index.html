<!DOCTYPE html>
<html>
<head>
    <title>Daily Planner</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="container">

    <h1>Daily Planner</h1>

    <form method="POST">

        <div class="card">
            <h2>Chores Due Today</h2>

            {% if chores %}
                {% for chore in chores %}
                    <label>
                        <input type="checkbox" name="chore" value="{{ chore }}">
                        {{ chore }}
                    </label>
                {% endfor %}
            {% else %}
                <p>ðŸŽ‰ All chores done for today!</p>
            {% endif %}
        </div>

        <div class="card">
            <h2>Daily Notes</h2>

            <textarea name="notes" rows="5"
                      placeholder="Notes for today...">{{ notes }}</textarea>
        </div>

        <div style="text-align:center;">
            <button type="submit">Save Today</button>
        </div>

    </form>

    <div style="margin-top: 30px;"></div>

    <div class="card">
        <h2>Coming Up This Week</h2>

        {% if weekly %}
            <ul class="weekly-list">
            {% for chore, due_date in weekly %}
                <li>
                    {{ due_date.strftime("%A") }} â€” {{ chore }}
                </li>
            {% endfor %}
            </ul>
        {% else %}
            <p>ðŸŽ‰ No chores coming up this week!</p>
        {% endif %}
    </div>
    <div class="history-section">
  <h2>Past Weeks</h2>

  {% if True %}
    {% for week_start, data in weekly_history|dictsort(reverse=True) %}
      <div class="history-week">
        <h3>Week of {{ week_start }}</h3>

        <strong>Completed chores:</strong>
        {% if data.chores %}
          <ul>
            {% for chore in data.chores %}
              <li>{{ chore }}</li>
            {% endfor %}
          </ul>
        {% else %}
          <p>No chores logged.</p>
        {% endif %}

        <strong>Notes:</strong>
        {% if data.notes %}
          <ul>
            {% for note in data.notes %}
              <li>{{ note }}</li>
            {% endfor %}
          </ul>
        {% else %}
          <p>No notes.</p>
        {% endif %}
      </div>
    {% endfor %}
  {% else %}
    <p>No past history yet.</p>
  {% endif %}
</div>

</div>

</body>
</html>
